extends ../layouts/default


block content
  .toeic-container
    header.page-header
      h1.page-title Đề Thi TOEIC
      p.page-subtitle Luyện tập với các đề thi TOEIC mới nhất và bám sát cấu trúc đề thi thật

    .main-content
      aside.filter-sidebar
        form(action="/toeic" method="GET")#filter-form
          .filter-section
            h3.filter-title Bộ lọc đề thi
            .filter-group
              label.filter-label Loại đề thi
              select(name="exam_type").form-select
                option(value="full") Đề thi full
                option(value="part") Theo part
                option(value="skill") Theo kỹ năng
            
          .filter-section
            h3.filter-title Kỹ Năng
            .filter-group
              .checkbox-group
                input(type="checkbox" name="skills" value="listening" id="listening-all" checked=selectedSkills.includes('listening')).checkbox
                label(for="listening-all") Listening
              .checkbox-group
                input(type="checkbox" name="skills" value="reading" id="reading-all" checked=selectedSkills.includes('reading')).checkbox
                label(for="reading-all") Reading

          .filter-section
            h3.filter-title Phần thi
            .filter-group
              label.filter-label Listening
              .checkbox-grid
                each part in [1, 2, 3, 4]
                  .checkbox-item
                    input(type="checkbox" name="parts" value=part id=`listening-part${part}` checked=selectedParts.includes(part.toString())).checkbox
                    label(for=`listening-part${part}`) Part #{part}
            
            .filter-group
              label.filter-label Reading
              .checkbox-grid
                each part in [5, 6, 7]
                  .checkbox-item
                    input(type="checkbox" name="parts" value=part id=`reading-part${part}` checked=selectedParts.includes(part.toString())).checkbox
                    label(for=`reading-part${part}`) Part #{part}

          .filter-actions
            button.btn.btn-primary(type="submit") 
              i.fas.fa-filter
              | Áp dụng bộ lọc
            button.btn.btn-secondary(type="reset") Đặt lại

      main.exam-list
        .list-header
          h2.section-title Danh sách đề thi
          .sort-options
            select(name="sort").form-select
              option(value="newest") Mới nhất
              option(value="popular") Phổ biến nhất
              option(value="difficulty") Độ khó

        if exams && exams.length
          .exam-grid
            each exam in exams
              article.exam-card
                .exam-badge
                  span.badge= exam.skill.toUpperCase()
                  span.badge Part #{exam.part}
                .exam-thumbnail
                  img(src=exam.thumbnail alt=exam.title loading="lazy")
                .exam-content
                  h3.exam-title= exam.title
                  .exam-meta
                    .meta-item
                      i.fas.fa-question-circle
                      span #{exam.questions} câu
                    .meta-item
                      i.fas.fa-clock
                      span #{exam.duration} phút
                    .meta-item
                      i.fas.fa-user
                      span #{exam.taken} lượt làm
                  .exam-difficulty
                    .difficulty-label Độ khó:
                    .stars
                      - for (let i = 0; i < 5; i++)
                        if i < exam.difficulty
                          i.fas.fa-star
                        else
                          i.far.fa-star
                  .exam-actions
                    a.btn.btn-primary(href=`/exam/${exam.id}`)
                      i.fas.fa-play
                      | Làm đề
                    button.btn.btn-outline
                      i.fas.fa-info-circle
                      | Chi tiết
        else
          .empty-state
            img.empty-image(src="/images/no-exams.svg" alt="Không có đề thi")
            h3.empty-title Không tìm thấy đề thi phù hợp
            p.empty-desc Hãy thử điều chỉnh bộ lọc của bạn hoặc quay lại sau
            button.btn.btn-primary
              i.fas.fa-sync-alt
              | Tải lại

  append head
  link(rel="stylesheet", href="client/css/toeic-dashboard.css")